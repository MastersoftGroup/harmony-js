"use strict";angular.module("harmonyHosted.service",[]).provider("HRAService",function(){function e(e,n,s,a){var i,u=this;this.getFullAddress=function(u,o,c){var d=c||t.authToken,l=n.defer(),f=(o?o.toUpperCase():void 0)||"AU";if(s.cancel(i),d&&0!=d.trim().length){if(!(u.length<t.minimumInputLength)){var h=btoa(d),A=t.serviceURL+f.toLowerCase()+"/address?callback=JSON_CALLBACK&fullAddress="+u+"&Authorization=Basic+"+h+"&sourceOfTruth="+r[f];return i=s(function(){a.debug("Sending a request back to the Restful service ...")},t.waitMillis,1),i.then(function(){return e.jsonp(A)})}l.reject({data:{status:"INSUFFICIENT_REQUEST"}})}else l.reject({data:{status:"AUTH_REQUIRED"}});return a.debug("HRA fast-failed response!"),l.promise},this.getAddress=function(e,t){var r=["AU","NZ"];return t&&-1!=r.indexOf(t.toUpperCase())?u.getFullAddress(e,t).then(function(e){var t=[];return angular.forEach(e.data.payload,function(e){t.push(e.fullAddress)}),t}):[]}}var t={serviceURL:"/harmony/rest/",minimumInputLength:5,waitMillis:300},r={AU:"AUPAF",NZ:"NZPAF"};this.setParams=function(e){for(var r in e){var n=e[r];t[r]=n}},this.$get=function(t,r,n,s){return new e(t,r,n,s)}});